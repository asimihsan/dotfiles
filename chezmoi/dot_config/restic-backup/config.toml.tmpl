# restic-backup TOML config (managed by chezmoi).
# Canonical repository schema:
#   [repositories.<host>] with uri, rclone_alias_remote, password_service, and onepassword_ref.
#
# The CLI resolves repository target host from [defaults].target_host unless
# overridden by CLI flags.

[repository_defaults]
limit_download = 5120
limit_upload = 2048
rclone_connections = 5
verbose = true
keychain_account = "{{ .chezmoi.username }}"
keychain_path = "{{ .chezmoi.homeDir }}/Library/Keychains/login.keychain-db"

[repositories.yov3bc]
uri = "rclone:dropbox-alias-backup-yov3bc:"
rclone_alias_remote = "dropbox:/Asim Ihsan/Apps/restic-backup-yov3bc-202407"
password_service = "restic-repo-yov3bc"
onepassword_ref = "op://Private/restic-backup-yov3bc-202407 backup password/password"

[repositories.okzf68]
uri = "rclone:dropbox-alias-backup-okzf68:"
rclone_alias_remote = "dropbox:/Asim Ihsan/Apps/restic-backup-okzf68-202507"
password_service = "restic-repo-okzf68"
onepassword_ref = "op://Private/restic-backup-okzf68-202507 backup password/password"

[repositories.hlru5i]
uri = "rclone:dropbox-alias-backup-hlru5i:"
rclone_alias_remote = "dropbox:/Asim Ihsan/Apps/restic-backup-hlru5i-202407"
password_service = "restic-repo-hlru5i"
onepassword_ref = "op://Private/restic-backup-hlru5i-202407 backup password/password"

[repositories.im9ibk]
uri = "rclone:dropbox-alias-backup-im9ibk:"
rclone_alias_remote = "dropbox:/Asim Ihsan/Apps/restic-backup-im9ibk-202507"
password_service = "restic-repo-im9ibk"
onepassword_ref = "op://Private/restic-backup-im9ibk-202507 backup password/password"

[defaults]
target_host = "{{ .chezmoi.hostname }}"
default_job = "main"
forget_group_by = "host,paths"

[jobs.main]
paths = [
  "~/.claude",
  "~/.codex",
  "~/.config",
  "~/.cursor",
  "~/.gnupg",
  "~/.local/share",
  "~/Desktop",
  "~/Documents",
  "~/Downloads",
  "~/Library/Application Support/Cursor/User",
  "~/Library/Application Support/Firefox",
  "~/Library/Keychains",
  "~/Library/Preferences",
  "~/Library/Thunderbird",
  "~/logs",
  "~/Movies",
  "~/Music",
  "~/workplace",
{{ if eq .chezmoi.hostname "hlru5i" }}
  "~/Obsidian",
  "~/personal-documents-copy/PD07Subset02.sparsebundle",
  "~/Dropbox/Private/Personal Documents (dropbox)",
{{ else if eq .chezmoi.hostname "okzf68" }}
  "~/Obsidian",
{{ end }}
]
exclude_caches = true
exclude_file = "{{ .chezmoi.homeDir }}/.config/restic-backup/excludes.txt"
pack_size = 16
read_concurrency = 4

[jobs.main.retention]
keep_hourly = 4
keep_daily = 7
keep_weekly = 4
keep_monthly = 1
