#!/bin/bash

declare -a intellij_args=("--wait")

for o in "$@"; do
  # Skip if the argument is already --wait or -w to avoid duplication
  if [[ "$o" = "--wait" || "$o" = "-w" ]]; then
    continue
  fi
  
  if [[ "$o" =~ " " ]]; then
    intellij_args+=("\"$o\"")
  else
    intellij_args+=("$o")
  fi
done

open -na "/Users/asimi/Applications/IntelliJ IDEA Ultimate.app/Contents/MacOS/idea" -W --args "${intellij_args[@]}"
